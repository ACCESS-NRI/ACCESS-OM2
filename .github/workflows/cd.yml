name: CD
on:
  push:
    branches:
      - main
      - backport/*.*
    paths:
      - config/**
      - spack.yaml
jobs:
  cd:
    name: CD
    uses: access-nri/build-cd/.github/workflows/cd.yml@v6
    with:
      model: ${{ vars.NAME }}
      spack-manifest-schema-version: 1-0-7
      config-versions-schema-version: 3-0-0
      config-packages-schema-version: 1-0-0
    permissions:
      contents: write
      # Required because later workflows also handle on.pull_request trigger
      pull-requests: write
    secrets: inherit
